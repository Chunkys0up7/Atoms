{
  "id": "65a8f0911894",
  "title": "TECH-DATA-FLOW: Closing Integration Points & APIs",
  "template_type": "TECHNICAL_DESIGN",
  "module_id": "module-closing-preparation",
  "atom_ids": [
    "atom-closing-doc-generation",
    "atom-closing-esign-integration",
    "atom-closing-title-integration",
    "atom-closing-appraisal-final",
    "atom-closing-compliance-audit",
    "atom-closing-borrower-review",
    "atom-closing-final-verification",
    "atom-closing-funding-prep"
  ],
  "content": "# Data Flow & Integration Guide: Closing Phase\n**Status:** APPROVED  \n**Version:** 2.0.0  \n**Date:** 2025-12-26  \n**Module:** module-closing-preparation + module-funding-recording  \n**Audience:** Developers, Integration Engineers, Operations\n\n## Document Overview\nComprehensive technical reference for data flows, system integrations, API contracts, and exception handling during the Closing phase of the mortgage lifecycle.\n\n## Systems Landscape\n\n### Primary Systems\n| System | Owner | Purpose | Integration Type |\n|--------|-------|---------|------------------|\n| LOS (Loan Origination) | David Thompson | Source of truth for loan data | Real-time API |\n| Document Engine | Michael Rodriguez | Generate closing docs | REST API |\n| eSignature Platform | James Martinez | Capture digital signatures | Webhook + polling |\n| Funding System | Robert Kim | Wire coordination | Message queue |\n| Compliance Engine | Jennifer Park | TILA-RESPA compliance | Real-time API |\n| County Recording System | David Thompson | Record deed/mortgage | Batch file transfer |\n\n## Core Data Objects\n\n### Loan Object (from LOS)\n```json\n{\n  \"loanId\": \"LN-2025-000156\",\n  \"borrower\": {\n    \"name\": \"John Smith\",\n    \"ssn\": \"XXX-XX-1234\",\n    \"email\": \"john@example.com\",\n    \"phone\": \"555-123-4567\"\n  },\n  \"property\": {\n    \"address\": \"123 Main St\",\n    \"city\": \"Springfield\",\n    \"state\": \"IL\",\n    \"zip\": \"62701\",\n    \"apn\": \"14-27-376-012\"\n  },\n  \"loan\": {\n    \"amount\": 350000,\n    \"rate\": 6.750,\n    \"term\": 360,\n    \"type\": \"CONVENTIONAL\",\n    \"purpose\": \"PURCHASE\"\n  },\n  \"closing\": {\n    \"scheduledDate\": \"2025-12-28T14:00:00Z\",\n    \"title_company\": \"ABC Title Corp\",\n    \"closing_location\": \"Springfield Branch Office\"\n  }\n}\n```\n\n### Closing Disclosure Document\n```yaml\nclosingId: CD-2025-000156\nloanId: LN-2025-000156\ngeneratedDate: 2025-12-26T10:30:00Z\ngeneratedBy: atom-sys-closing-disclosure\n\nsections:\n  loan_terms:\n    loanAmount: 350000\n    interestRate: 6.750\n    loanTerm: 360\n    paymentSchedule: \"Monthly\"\n  \n  projected_payments:\n    principal_interest: 2332.50\n    property_taxes: 425.00\n    homeowners_insurance: 125.00\n    hoa_fees: 0\n    total_monthly: 2882.50\n  \n  costs_at_closing:\n    buyer_side_closing_costs: 8750\n    seller_side_closing_costs: 14300\n    \n  loan_estimate_comparison:\n    le_issued_date: 2025-12-20\n    disclosed_apy: 6.823\n    estimate_loan_charges: 2650\n    actual_loan_charges: 2675\n    variance_pct: 0.94  # % difference\n```\n\n## Process Flow: Closing Phase\n\n### Phase 1: Pre-Closing (T-3 to T-1 days)\n\n#### Atom: atom-bo-closing-doc-prep\n**Status:** APPROVED module-closing-preparation  \n**Owner:** Robert Kim | **Steward:** David Thompson  \n**Criticality:** CRITICAL  \n\n**Inputs:**\n- Final loan data from LOS\n- Appraisal report (if applicable)\n- Title commitment\n- Clear-to-close status from underwriting\n\n**Process Steps:**\n1. Pull final loan data via LOS API\n   ```\n   GET /api/loans/{loanId}/final-details\n   Response: Loan object with all conditions cleared\n   ```\n\n2. Validate all required documents are in eFolder\n   ```\n   POST /api/documents/validate-complete\n   {\n     \"loanId\": \"LN-2025-000156\",\n     \"requiredDocs\": [\"1003\", \"appraisal\", \"title\", \"voe\", \"vod\"]\n   }\n   Response: { \"status\": \"COMPLETE\", \"missingDocs\": [] }\n   ```\n\n3. Generate Closing Disclosure (via Document Engine)\n   ```\n   POST /api/documents/generate\n   {\n     \"documentType\": \"CLOSING_DISCLOSURE\",\n     \"loanId\": \"LN-2025-000156\",\n     \"effectiveDate\": \"2025-12-26\"\n   }\n   Response: { \"documentId\": \"CD-2025-000156\", \"url\": \"s3://...\" }\n   ```\n\n4. Generate Title Commitment Summary\n5. Generate Loan Estimate (final version for comparison)\n\n**Outputs:**\n- Closing Disclosure (delivered to borrower via eSignature portal)\n- Title commitment summary\n- Final Loan Estimate\n- eClosing package (if applicable)\n\n**Exception Handling:**\n- **Missing document:** Trigger atom-bo-condition-clearance retry\n- **Loan amount mismatch:** Escalate to underwriter\n- **CD compliance error:** Halt process, notify compliance officer\n\n**Success Criteria:**\n- ✓ CD generated within 24 hours of clear-to-close\n- ✓ CD delivered to borrower with 3-day waiting period\n- ✓ All required docs in eFolder\n- ✓ No TILA-RESPA compliance violations\n\n---\n\n#### Atom: atom-sys-closing-disclosure\n**Status:** APPROVED module-closing-preparation  \n**Owner:** Michael Rodriguez | **Steward:** David Thompson  \n**Criticality:** CRITICAL  \n**Automation:** 92%\n\n**Regulatory Context:**\n- TILA-RESPA Rule compliance mandatory\n- Must be issued 3 calendar days before closing\n- Borrower must sign and acknowledge receipt\n- Final disclosure issued within 1 day of closing\n\n**Generation Logic:**\n```\nInput: Final loan data + all clearing conditions\n├─ Calculate final payment schedule\n│  ├─ Principal & interest\n│  ├─ Property taxes (via property tax lookup)\n│  ├─ Insurance (final binder amount)\n│  └─ HOA/other recurring charges\n├─ Calculate closing costs\n│  ├─ Lender charges (underwriting, processing)\n│  ├─ Third-party charges (appraisal, title, survey)\n│  ├─ Prepaids (property taxes, insurance, HOA)\n│  ├─ Escrow deposits\n│  └─ Adjustments\n├─ Validate CD vs. Loan Estimate\n│  └─ Flag any > 10% variance on loan charges\n├─ Generate regulatory disclosures\n│  ├─ APR calculation\n│  ├─ Finance charge summary\n│  └─ Payment schedule table\n└─ Create PDF & eSignature-ready version\n\nOutput: Closing Disclosure + compliance certification\n```\n\n**Data Integration Points:**\n- **Property Tax Service:** Integration for annual tax estimates\n  ```\n  GET /api/propertytax/estimate?address={address}&county={county}\n  Response: { \"annualTax\": 4200, \"monthlyEscrow\": 350 }\n  ```\n\n- **Insurance Provider:** Get final insurance binder\n  ```\n  GET /api/insurance/binder/{borrowerId}\n  Response: { \"premium\": 1500, \"escrowMonthly\": 125 }\n  ```\n\n- **HOA Database:** Fetch HOA fees\n  ```\n  GET /api/hoa/fees?address={address}\n  Response: { \"monthlyFee\": 0, \"annualFee\": 0 }\n  ```\n\n---\n\n### Phase 2: Closing Day (T-day)\n\n#### Atom: atom-cust-closing-signing\n**Status:** IN PROGRESS module-closing-preparation  \n**Owner:** James Martinez | **Steward:** N/A  \n**Criticality:** CRITICAL  \n**Automation:** 5% (manual ceremony)\n\n**Prerequisites:**\n- CD delivered 3+ days prior\n- Borrower reviewed disclosure\n- No last-minute loan changes\n- Title commitment resolved (no exceptions)\n\n**Process:**\n1. **Closing Preparation** (1 hour before)\n   - Print closing documents\n   - Verify borrower identity (government ID)\n   - Review signing authority\n   - Set up eSignature platform (or wet signature setup)\n\n2. **Document Review & Execution** (30-45 min)\n   - Closing Disclosure acknowledgment\n   - Note Rate Lock details\n   - Promissory Note signing\n   - Mortgage/Deed of Trust signing\n   - Title insurance acknowledgment\n   - Wire instruction confirmation\n   - Other applicable docs (HOA disclosure, etc.)\n\n3. **Post-Closing** (15 min)\n   - Collect borrower and lender counterparts\n   - Obtain closing attorney certification\n   - Coordinate with title company for recording queue\n   - Confirm funds due date and amount\n\n**Integration Point: eSignature Platform**\n```\nPOST /api/esign/ceremony\n{\n  \"loanId\": \"LN-2025-000156\",\n  \"documents\": [\n    { \"docId\": \"CD-2025-000156\", \"type\": \"CLOSING_DISCLOSURE\" },\n    { \"docId\": \"PN-2025-000156\", \"type\": \"PROMISSORY_NOTE\" },\n    { \"docId\": \"MOD-2025-000156\", \"type\": \"MORTGAGE\" }\n  ],\n  \"signers\": [\n    { \"name\": \"John Smith\", \"email\": \"john@example.com\", \"role\": \"BORROWER\" },\n    { \"name\": \"Jane Doe\", \"email\": \"jane@example.com\", \"role\": \"CLOSING_AGENT\" }\n  ],\n  \"ceremonyDate\": \"2025-12-28T14:00:00Z\"\n}\n\nResponse:\n{\n  \"ceremonyId\": \"CER-2025-000156\",\n  \"status\": \"SCHEDULED\",\n  \"signingLink\": \"https://esign.platform.com/ceremony/CER-2025-000156\"\n}\n```\n\n**Webhook: Signing Completion**\n```\nPOST /api/loans/webhooks/closing-signed\n{\n  \"loanId\": \"LN-2025-000156\",\n  \"ceremonyId\": \"CER-2025-000156\",\n  \"signedTime\": \"2025-12-28T14:15:00Z\",\n  \"documentsCompleted\": 6,\n  \"documentsTotal\": 6,\n  \"status\": \"COMPLETE\"\n}\n\nAction: Trigger atom-sys-funding-wire\n```\n\n---\n\n#### Atom: atom-sys-funding-wire\n**Status:** APPROVED module-funding-recording  \n**Owner:** Robert Kim | **Steward:** David Thompson  \n**Criticality:** CRITICAL  \n**Automation:** 98%\n\n**Trigger:** Closing documents signed + funds available\n\n**Funding Workflow:**\n```\nClosing Documents Signed\n├─ Closing attorney certifies signing\n├─ Record prepared\n└─ Title company places on recording queue\n   │\n   ├─ County recording (48-72 hours)\n   │  └─ Deed recorded → Title company issues policy\n   │\n   ├─ Parallel: Wire funds coordination\n   │  ├─ Confirm wire instructions (atom-bo-closing-wire-instructions)\n   │  ├─ Final payoff demand to existing lender\n   │  ├─ Verify closing costs (final reconciliation)\n   │  └─ Send wire to title company\n   │\n   └─ Title company funds seller & lender\n      ├─ Funds released to seller account\n      └─ Lender receives payoff confirmation + title policy\n```\n\n**Wire Instruction Data Flow:**\n```json\n{\n  \"wireId\": \"WIR-2025-000156\",\n  \"loanId\": \"LN-2025-000156\",\n  \"wipAmount\": 344325,  // net after payoffs\n  \"wireDate\": \"2025-12-28T16:30:00Z\",\n  \"destination\": {\n    \"bankName\": \"ABC Title Company Escrow\",\n    \"accountNumber\": \"XXXX-XXXX-1234\",\n    \"routingNumber\": \"021000021\",\n    \"reference\": \"Escrow for 123 Main St - Smith Loan\"\n  },\n  \"verification\": {\n    \"borrowerVerified\": true,\n    \"wireInstructionsAcknowledged\": true,\n    \"dueDisses\": [\"no_third_party_wire\", \"confirm_amounts\", \"limit_wire_recipients\"]\n  }\n}\n```\n\n**Verification Check:**\n```\nPOST /api/wire/verify\n{\n  \"wireId\": \"WIR-2025-000156\",\n  \"destinationBank\": \"ABC Title Company\",\n  \"amount\": 344325,\n  \"borrowerAcknowledgment\": true\n}\n\nResponse: { \"status\": \"VERIFIED\", \"canProceed\": true }\n```\n\n**Integration: Send wire to Bank**\n```\nPOST /bank-api/wire-transfer\n{\n  \"externalWireId\": \"WIR-2025-000156\",\n  \"amount\": 344325,\n  \"destination\": {\n    \"bank\": \"ABC Title Company\",\n    \"account\": \"XXXX-1234\",\n    \"routing\": \"021000021\"\n  },\n  \"reference\": \"Escrow 123 Main - Smith\"\n}\n\nResponse:\n{\n  \"wireConfirmation\": \"WIRE-BANK-9876543\",\n  \"status\": \"SENT\",\n  \"expectedDelivery\": \"2025-12-28T16:35:00Z\"\n}\n```\n\n**Webhook: Wire Delivery Confirmation**\n```\nPOST /api/loans/webhooks/wire-delivered\n{\n  \"wireId\": \"WIR-2025-000156\",\n  \"bankConfirmation\": \"WIRE-BANK-9876543\",\n  \"deliveredTime\": \"2025-12-28T16:32:00Z\",\n  \"amount\": 344325,\n  \"status\": \"DELIVERED\"\n}\n\nAction: Trigger atom-sys-wire-verification & atom-sys-deed-recording\n```\n\n---\n\n#### Atom: atom-sys-deed-recording\n**Status:** APPROVED module-funding-recording  \n**Owner:** David Thompson | **Steward:** Lisa Anderson  \n**Criticality:** CRITICAL  \n**Automation:** 85%\n\n**Integration: County Recording System**\n```\nBatch File Transfer (overnight):\n├─ Consolidate all documents needing recording\n├─ Format per county requirements (XML/PDF)\n├─ Submit to county recording office\n└─ Track recording status\n\nAPI Alternative (real-time):\nPOST /api/county/{countyCode}/record-document\n{\n  \"recordingType\": \"DEED\",\n  \"documentPath\": \"s3://closing-docs/deed-2025-000156.pdf\",\n  \"propertyApn\": \"14-27-376-012\",\n  \"borrower\": \"John Smith\",\n  \"lender\": \"ABC Bank\"\n}\n\nResponse: { \"recordingId\": \"REC-20251228-001\", \"status\": \"QUEUED\" }\n```\n\n**Recording Status Polling:**\n```\nGET /api/county/{countyCode}/recording/{recordingId}\n\nResponse:\n{\n  \"recordingId\": \"REC-20251228-001\",\n  \"status\": \"RECORDED\",\n  \"recordNumber\": \"2025-1247830\",\n  \"recordedDate\": \"2025-12-30T10:15:00Z\",\n  \"url\": \"https://county.records.com/search?recordNo=2025-1247830\"\n}\n\nAction: Trigger atom-bo-post-closing-audit\n```\n\n---\n\n### Phase 3: Post-Closing (T+1 to T+5 days)\n\n#### Atom: atom-bo-post-closing-audit\n**Status:** APPROVED module-quality-control  \n**Owner:** David Thompson | **Steward:** Lisa Anderson  \n**Criticality:** HIGH  \n**Automation:** 35%\n\n**Audit Checklist:**\n- ✓ All documents signed correctly\n- ✓ Wire transferred successfully\n- ✓ Deed recorded (verify recording number)\n- ✓ Title policy issued\n- ✓ Final payoff funds received by seller\n- ✓ Any conditions cleared and documented\n- ✓ Closing costs reconciled to CD\n- ✓ Borrower contact confirmed post-closing\n\n**Audit Data Source:**\n```\nPOST /api/audit/closing/{loanId}\n{\n  \"auditType\": \"POST_CLOSING_VERIFICATION\",\n  \"checkpoints\": [\n    { \"item\": \"documents_signed\", \"verified\": true },\n    { \"item\": \"wire_confirmed\", \"verified\": true },\n    { \"item\": \"recording_confirmed\", \"verified\": true },\n    { \"item\": \"title_policy_issued\", \"verified\": true },\n    { \"item\": \"closing_costs_reconciled\", \"verified\": true }\n  ]\n}\n\nResponse: { \"auditId\": \"AUD-2025-000156\", \"status\": \"PASSED\" }\n```\n\n**Investor Reporting:**\n```\nBatch Export (daily):\n├─ Loan data + closing details\n├─ Format per investor requirement (FNMA, FHLMC)\n├─ Include: closing costs, rate, property details\n└─ Submit via secure upload\n\nTiming: T+1 to T+5 based on investor requirements\n```\n\n---\n\n## Exception Handling Matrix\n\n| Exception | Trigger | Action | Timeline | Owner |\n|-----------|---------|--------|----------|-------|\n| Signing reschedule | Borrower request | Update ceremony, resend CD | 2 hours | James M. |\n| Wire instruction change | Borrower calls after CD issued | Follow fraud protocols, escalate | 1 hour | Robert K. |\n| Recording rejection | County rejects document | Correct & resubmit, update borrower | 24 hours | David T. |\n| Title commitment exception | Title company finds lien | Payoff negotiation, hold closing | 48 hours | David T. |\n| Missing funds | Insufficient account | Investigate, request wire verification | 4 hours | Robert K. |\n| Payoff discrepancy | Seller short funds | Negotiate seller contribution | 24 hours | James M. |\n\n## Performance Dashboards\n\n### Real-time Closing Pipeline\n- Documents generated/delivered: 12/12\n- Signings scheduled today: 8\n- Signings completed: 5\n- Wires queued: 2\n- Recording status: 14 processed, 0 rejected\n\n### SLA Metrics\n| Metric | Target | Current | Status |\n|--------|--------|---------|--------|\n| CD generation time | < 24 hrs | 18.3 hrs | ✓ |\n| Signing-to-wire time | < 48 hrs | 32.1 hrs | ✓ |\n| Recording to title policy | < 5 days | 4.2 days | ✓ |\n| Post-closing audit | < 5 days | 3.8 days | ✓ |\n| Investor reporting | Per requirement | On time | ✓ |\n\n---\n\n**Version Control:**  \nv2.0.0 — Full integration guide with data flows  \nv1.5.0 — Initial process document  \n\n**Last Updated:** 2025-12-26  \n**Next Review:** 2026-03-26  \n**Maintained By:** David Thompson, Robert Kim\n",
  "metadata": {},
  "created_at": "2025-12-26T14:19:47.097636",
  "updated_at": "2025-12-26T14:19:47.097636",
  "version": 1
}